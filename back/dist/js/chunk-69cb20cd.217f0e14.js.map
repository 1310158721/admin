{"version":3,"sources":["webpack:///./node_modules/_core-js@3.6.4@core-js/modules/es.object.get-own-property-descriptor.js","webpack:///./node_modules/_@babel_runtime@7.8.3@@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/_core-js@3.6.4@core-js/modules/es.object.keys.js","webpack:///./src/views/PermissionMenu/PermissionEditPage.vue?d4e9","webpack:///src/views/PermissionMenu/PermissionEditPage.vue","webpack:///./src/views/PermissionMenu/PermissionEditPage.vue?951c","webpack:///./src/views/PermissionMenu/PermissionEditPage.vue","webpack:///./src/views/PermissionMenu/PermissionEditPage.vue?b4a9","webpack:///./node_modules/_core-js@3.6.4@core-js/modules/es.object.get-own-property-descriptors.js"],"names":["$","fails","toIndexedObject","nativeGetOwnPropertyDescriptor","f","DESCRIPTORS","FAILS_ON_PRIMITIVES","FORCED","target","stat","forced","sham","getOwnPropertyDescriptor","it","key","_defineProperty","obj","value","Object","defineProperty","enumerable","configurable","writable","toObject","nativeKeys","keys","render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","expression","staticClass","ref","attrs","userInfos","rules","model","callback","$$v","$set","inline","modifiers","avatar","role","_l","item","label","minRows","maxRows","menuList","defaultProps","on","checkChange","_e","nativeOn","$event","$throttleHandleSave","_v","staticRenderFns","components","props","data","isLoading","id","hasPermission","children","computed","roleEnum","methods","getAllChildKeys","childKeyArray","isCheck","getAllParentKeys","parent","parentKeysArray","hasCheckKeysAfterSet","hasCheckKeys","filter","$refs","tree","setCheckedKeys","map","push","i","permission","Array","isArray","handleSave","updateUserPermissionInfos","hasCheckedKeys","_id","status","params","isShouldRefresh","created","$axios","mounted","watch","component","ownKeys","getOwnPropertyDescriptorModule","createProperty","getOwnPropertyDescriptors","object","descriptor","O","result","index","length","undefined"],"mappings":"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","file":"js/chunk-69cb20cd.217f0e14.js","sourcesContent":["var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar nativeGetOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeGetOwnPropertyDescriptor(1); });\nvar FORCED = !DESCRIPTORS || FAILS_ON_PRIMITIVES;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.github.io/ecma262/#sec-object.getownpropertydescriptor\n$({ target: 'Object', stat: true, forced: FORCED, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(it, key) {\n    return nativeGetOwnPropertyDescriptor(toIndexedObject(it), key);\n  }\n});\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","var $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar nativeKeys = require('../internals/object-keys');\nvar fails = require('../internals/fails');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });\n\n// `Object.keys` method\n// https://tc39.github.io/ecma262/#sec-object.keys\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  keys: function keys(it) {\n    return nativeKeys(toObject(it));\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.isLoading),expression:\"isLoading\"}],staticClass:\"permission-edit-page-wrapper\"},[_c('el-form',{ref:\"form\",staticClass:\"permission-form\",attrs:{\"model\":_vm.userInfos,\"rules\":_vm.rules,\"label-width\":\"96px\",\"label-position\":\"left\"}},[_c('el-row',{staticClass:\"form-content-wrapper\",attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"size\":\"small\",\"label\":\"账号：\"}},[_c('el-input',{attrs:{\"size\":\"small\",\"disabled\":\"\"},model:{value:(_vm.userInfos.account),callback:function ($$v) {_vm.$set(_vm.userInfos, \"account\", $$v)},expression:\"userInfos.account\"}})],1),_c('el-form-item',{attrs:{\"size\":\"small\",\"label\":\"密码：\"}},[_c('el-input',{attrs:{\"size\":\"small\",\"disabled\":\"\"},model:{value:(_vm.userInfos.password),callback:function ($$v) {_vm.$set(_vm.userInfos, \"password\", $$v)},expression:\"userInfos.password\"}})],1),_c('el-form-item',{attrs:{\"size\":\"small\",\"label\":\"名称：\"}},[_c('el-input',{attrs:{\"size\":\"small\",\"disabled\":\"\"},model:{value:(_vm.userInfos.name),callback:function ($$v) {_vm.$set(_vm.userInfos, \"name\", $$v)},expression:\"userInfos.name\"}})],1),_c('el-form-item',{attrs:{\"size\":\"small\",\"label\":\"号码：\"}},[_c('el-input',{attrs:{\"size\":\"small\",\"disabled\":\"\"},model:{value:(_vm.userInfos.mobile),callback:function ($$v) {_vm.$set(_vm.userInfos, \"mobile\", $$v)},expression:\"userInfos.mobile\"}})],1),_c('el-form-item',{attrs:{\"size\":\"small\",\"label\":\"创建时间：\"}},[_c('el-input',{attrs:{\"size\":\"small\",\"disabled\":\"\"},model:{value:(_vm.userInfos.createdTime),callback:function ($$v) {_vm.$set(_vm.userInfos, \"createdTime\", $$v)},expression:\"userInfos.createdTime\"}})],1),_c('el-form-item',{attrs:{\"size\":\"small\",\"label\":\"头像：\"}},[_c('div',{directives:[{name:\"viewer\",rawName:\"v-viewer.static\",value:({inline: false}),expression:\"{inline: false}\",modifiers:{\"static\":true}}],staticClass:\"images\"},[_c('img',{attrs:{\"src\":_vm.userInfos.avatar,\"width\":\"144\",\"height\":\"144\"}})])]),_c('el-form-item',{attrs:{\"size\":\"small\",\"label\":\"级别：\"}},[_c('el-select',{attrs:{\"disabled\":_vm.userInfos.role === 'SUPERADMIN',\"placeholder\":\"请选择\"},model:{value:(_vm.userInfos.role),callback:function ($$v) {_vm.$set(_vm.userInfos, \"role\", $$v)},expression:\"userInfos.role\"}},_vm._l((_vm.roleEnum),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_c('el-form-item',{attrs:{\"size\":\"small\",\"label\":\"描述：\",\"prop\":\"desc\"}},[_c('el-input',{attrs:{\"disabled\":\"\",\"type\":\"textarea\",\"autosize\":{ minRows: 3, maxRows: 6 },\"show-word-limit\":\"\",\"maxlength\":\"100\",\"placeholder\":\"请输入内容\"},model:{value:(_vm.userInfos.desc),callback:function ($$v) {_vm.$set(_vm.userInfos, \"desc\", $$v)},expression:\"userInfos.desc\"}})],1)],1),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"size\":\"small\",\"label\":\"权限菜单：\"}},[(_vm.menuList)?_c('el-tree',{ref:\"tree\",attrs:{\"data\":_vm.menuList,\"show-checkbox\":\"\",\"default-expand-all\":\"\",\"node-key\":\"permission\",\"highlight-current\":\"\",\"check-strictly\":\"\",\"props\":_vm.defaultProps},on:{\"check\":_vm.checkChange}}):_vm._e()],1)],1)],1),_c('div',{staticClass:\"button-wrapper mgt-20\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},nativeOn:{\"click\":function($event){return _vm.$throttleHandleSave($event)}}},[_vm._v(\"保 存\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"permission-edit-page-wrapper\" v-loading=\"isLoading\">\n    <el-form\n      :model=\"userInfos\"\n      :rules=\"rules\"\n      ref=\"form\"\n      label-width=\"96px\"\n      class=\"permission-form\"\n      label-position=\"left\"\n    >\n      <el-row :gutter=\"20\" class=\"form-content-wrapper\">\n        <el-col :span=\"12\">\n          <el-form-item size=\"small\" label=\"账号：\">\n            <el-input size=\"small\" disabled v-model=\"userInfos.account\" />\n          </el-form-item>\n          <el-form-item size=\"small\" label=\"密码：\">\n            <el-input size=\"small\" disabled v-model=\"userInfos.password\" />\n          </el-form-item>\n          <el-form-item size=\"small\" label=\"名称：\">\n            <el-input size=\"small\" disabled v-model=\"userInfos.name\" />\n          </el-form-item>\n          <el-form-item size=\"small\" label=\"号码：\">\n            <el-input size=\"small\" disabled v-model=\"userInfos.mobile\" />\n          </el-form-item>\n          <el-form-item size=\"small\" label=\"创建时间：\">\n            <el-input size=\"small\" disabled v-model=\"userInfos.createdTime\" />\n          </el-form-item>\n          <el-form-item size=\"small\" label=\"头像：\">\n            <div class=\"images\" v-viewer.static=\"{inline: false}\">\n              <img :src=\"userInfos.avatar\" width=\"144\" height=\"144\" />\n            </div>\n          </el-form-item>\n          <el-form-item size=\"small\" label=\"级别：\">\n            <el-select\n              :disabled=\"userInfos.role === 'SUPERADMIN'\"\n              v-model=\"userInfos.role\"\n              placeholder=\"请选择\"\n            >\n              <el-option\n                v-for=\"item in roleEnum\"\n                :key=\"item.value\"\n                :label=\"item.label\"\n                :value=\"item.value\"\n              />\n            </el-select>\n          </el-form-item>\n          <el-form-item size=\"small\" label=\"描述：\" prop=\"desc\">\n            <el-input\n              disabled\n              type=\"textarea\"\n              :autosize=\"{ minRows: 3, maxRows: 6 }\"\n              show-word-limit\n              maxlength='100'\n              placeholder=\"请输入内容\"\n              v-model=\"userInfos.desc\">\n            </el-input>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"12\">\n          <el-form-item size=\"small\" label=\"权限菜单：\">\n            <el-tree\n              v-if=\"menuList\"\n              :data=\"menuList\"\n              show-checkbox\n              default-expand-all\n              node-key=\"permission\"\n              ref=\"tree\"\n              highlight-current\n              check-strictly\n              :props=\"defaultProps\"\n              @check=\"checkChange\"\n            />\n          </el-form-item>\n        </el-col>\n      </el-row>\n      <div class=\"button-wrapper mgt-20\">\n        <el-button\n          type=\"primary\"\n          size=\"small\"\n          @click.native=\"$throttleHandleSave\"\n          >保 存</el-button\n        >\n      </div>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport { $formDate, $throttle } from '@/assets/js/utils';\nimport { roleEnum } from '@/assets/js/enum';\nimport { mapMutations } from 'vuex';\nexport default {\n  name: 'PermissionEditPage',\n  components: {},\n  props: {},\n  data () {\n    return {\n      isLoading: false,\n      id: null,\n      userInfos: {},\n      rules: {},\n      menuList: null,\n      hasPermission: null,\n      defaultProps: {\n        children: 'children',\n        label: 'title'\n      }\n    };\n  },\n  computed: {\n    roleEnum () {\n      if (this.userInfos.role === 'SUPERADMIN') {\n        return roleEnum;\n      } else {\n        return roleEnum.filter(i => i.value !== 'SUPERADMIN');\n      }\n    },\n    $throttleHandleSave () {\n      return $throttle(() => this.handleSave(), 2000);\n    }\n  },\n  methods: {\n    ...mapMutations(['SETUSERINFOS', 'SETMENULIST']),\n    async getUserInfo (params) {\n      return await this.$axios.get('/getUserInfos', { params });\n    },\n    async getAllPermissionMenu () {\n      return await this.$axios.get('/getAllPermissionMenu');\n    },\n    async updateUserPermissionInfos (data) {\n      this.isLoading = true;\n      return await this.$axios.post('/updateUserPermissionInfos', data);\n    },\n    checkChange (data, options) {\n      const currentClickKey = data.permission;\n      const currentCheckKeys = options.checkedKeys;\n      const isCheck = currentCheckKeys.includes(currentClickKey);\n\n      const childKeyArray = [];\n      this.getAllChildKeys([data], childKeyArray);\n      const hasCheckKeys = this.$refs.tree.getCheckedKeys();\n\n      let hasCheckKeysAfterSet = null;\n      if (isCheck) {\n        const { parent } = this.$refs.tree.getNode(currentClickKey);\n        const parentKeysArray = [];\n        this.getAllParentKeys(parent, parentKeysArray);\n        hasCheckKeysAfterSet = [\n          ...new Set([...childKeyArray, ...hasCheckKeys, ...parentKeysArray])\n        ];\n      } else {\n        hasCheckKeysAfterSet = hasCheckKeys.filter(\n          i => !childKeyArray.includes(i)\n        );\n      }\n      this.$refs.tree.setCheckedKeys(hasCheckKeysAfterSet);\n    },\n    getAllChildKeys (parent, childKeyArray = []) {\n      parent.map(i => {\n        childKeyArray.push(i.permission);\n        if (i.children) {\n          this.getAllChildKeys(i.children, childKeyArray);\n        }\n      });\n    },\n    getAllParentKeys (parent, parentKeysArray = []) {\n      if (!Array.isArray(parent.data)) {\n        parentKeysArray.push(parent.data.permission);\n      }\n      if (parent.parent) {\n        this.getAllParentKeys(parent.parent, parentKeysArray);\n      }\n    },\n    handleSave () {\n      const hasCheckedKeys = this.$refs.tree.getCheckedKeys().join(',');\n      const role = this.userInfos.role;\n      this.updateUserPermissionInfos({\n        permission: hasCheckedKeys,\n        role,\n        _id: this.id\n      }).then(res => {\n        const { status, msg } = res.data;\n        if (status === 0) {\n          // 更新自己数据时，面刷新页面处理\n          if (\n            this.userInfos.account === this.$store.state.userInfo.account &&\n            this.userInfos.password === this.$store.state.userInfo.password\n          ) {\n            this.isLoading = false;\n            this.$message.success(msg);\n            if (this.userInfos.isSelf) {\n              /**\n               * 当前修改操作是主人对自身数据进行修改时，则跳转路由后要刷新页面\n               * 有可能主人开启了某些权限菜单，但这时还没有添加菜单对应的路由组件\n               * 此时跳转则会直接重定向到404页面\n               */\n              this.$router.push({\n                name: 'PermissionMenu',\n                params: {\n                  isShouldRefresh: true\n                }\n              });\n            } else {\n              this.$router.back();\n            }\n          } else {\n            this.isLoading = false;\n            this.$message.success(msg);\n            this.$router.back();\n          }\n        }\n      });\n    }\n  },\n  created () {\n    const { _id } = this.$route.query;\n    this.id = _id;\n\n    this.isLoading = true;\n    this.$axios\n      .all([this.getUserInfo({ _id }), this.getAllPermissionMenu()])\n      .then(\n        this.$axios.spread((user, menu) => {\n          const menuStatus = menu.data.status;\n          if (menuStatus === 0) {\n            this.menuList = menu.data.result;\n          }\n\n          const userStatus = user.data.status;\n          if (userStatus === 0) {\n            this.userInfos = user.data.result;\n            this.userInfos.createdTime = $formDate(\n              new Date(this.userInfos.createdTime),\n              'yyyy-MM-dd hh:mm:ss'\n            );\n            const { permission = '' } = this.userInfos;\n            this.hasPermission = permission.split(',');\n            this.$nextTick(() => {\n              this.$refs.tree.setCheckedKeys(permission.split(','));\n            });\n          }\n\n          this.isLoading = false;\n        })\n      );\n  },\n  mounted () {},\n  watch: {}\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.permission-edit-page-wrapper {\n  height: 100%;\n  width: 100%;\n  padding: 20px;\n  box-sizing: border-box;\n  .permission-form {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    .form-content-wrapper {\n      flex: 1;\n      height: 100%;\n      overflow-y: auto;\n      .images {\n        img {\n          cursor: pointer;\n        }\n      }\n    }\n    .button-wrapper {\n      text-align: center;\n      .el-button {\n        width: 200px;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js??vue-loader-options!./PermissionEditPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js??vue-loader-options!./PermissionEditPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PermissionEditPage.vue?vue&type=template&id=966057e6&scoped=true&\"\nimport script from \"./PermissionEditPage.vue?vue&type=script&lang=js&\"\nexport * from \"./PermissionEditPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./PermissionEditPage.vue?vue&type=style&index=0&id=966057e6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.8.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"966057e6\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@3.4.2@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.8.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js??vue-loader-options!./PermissionEditPage.vue?vue&type=style&index=0&id=966057e6&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@3.4.2@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.8.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js??vue-loader-options!./PermissionEditPage.vue?vue&type=style&index=0&id=966057e6&lang=scss&scoped=true&\"","var $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar ownKeys = require('../internals/own-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar createProperty = require('../internals/create-property');\n\n// `Object.getOwnPropertyDescriptors` method\n// https://tc39.github.io/ecma262/#sec-object.getownpropertydescriptors\n$({ target: 'Object', stat: true, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {\n    var O = toIndexedObject(object);\n    var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n    var keys = ownKeys(O);\n    var result = {};\n    var index = 0;\n    var key, descriptor;\n    while (keys.length > index) {\n      descriptor = getOwnPropertyDescriptor(O, key = keys[index++]);\n      if (descriptor !== undefined) createProperty(result, key, descriptor);\n    }\n    return result;\n  }\n});\n"],"sourceRoot":""}