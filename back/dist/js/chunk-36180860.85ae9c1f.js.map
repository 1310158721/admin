{"version":3,"sources":["webpack:///./node_modules/_core-js@3.6.4@core-js/modules/es.object.get-own-property-descriptor.js","webpack:///./node_modules/_@babel_runtime@7.8.3@@babel/runtime/helpers/esm/defineProperty.js","webpack:///./node_modules/_core-js@3.6.4@core-js/modules/es.object.keys.js","webpack:///./src/assets/js/constant.js","webpack:///./src/views/User/Personal.vue?40a5","webpack:///src/views/User/Personal.vue","webpack:///./src/views/User/Personal.vue?9b2f","webpack:///./src/views/User/Personal.vue","webpack:///./src/views/User/Personal.vue?b92e","webpack:///./node_modules/_core-js@3.6.4@core-js/modules/es.object.get-own-property-descriptors.js"],"names":["$","fails","toIndexedObject","nativeGetOwnPropertyDescriptor","f","DESCRIPTORS","FAILS_ON_PRIMITIVES","FORCED","target","stat","forced","sham","getOwnPropertyDescriptor","it","key","_defineProperty","obj","value","Object","defineProperty","enumerable","configurable","writable","toObject","nativeKeys","keys","RegExp","ACCOUNT","PASSWORD","USERNAME","MOBILE","render","_vm","this","_h","$createElement","_c","_self","directives","name","rawName","expression","staticClass","ref","attrs","userInfos","rules","model","callback","$$v","$set","directory","defaultPics","on","removeCallBack","successCallback","role","_l","item","label","minRows","maxRows","menuList","defaultProps","checkChange","_e","nativeOn","$event","$throttleHandleSave","_v","staticRenderFns","components","props","data","account","password","mobile","avatar","desc","isLoading","hasPermission","children","computed","roleEnum","methods","getAllChildKeys","childKeyArray","isCheck","getAllParentKeys","parent","parentKeysArray","hasCheckKeysAfterSet","hasCheckKeys","filter","$refs","tree","setCheckedKeys","map","push","i","permission","Array","isArray","disabledMenuList","list","disabled","length","url","handleSave","validate","created","$axios","all","getUserInfo","getAllPermissionMenu","then","mounted","watch","component","ownKeys","getOwnPropertyDescriptorModule","createProperty","getOwnPropertyDescriptors","object","descriptor","O","result","index","undefined"],"mappings":"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","file":"js/chunk-36180860.85ae9c1f.js","sourcesContent":["var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar nativeGetOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeGetOwnPropertyDescriptor(1); });\nvar FORCED = !DESCRIPTORS || FAILS_ON_PRIMITIVES;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.github.io/ecma262/#sec-object.getownpropertydescriptor\n$({ target: 'Object', stat: true, forced: FORCED, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(it, key) {\n    return nativeGetOwnPropertyDescriptor(toIndexedObject(it), key);\n  }\n});\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","var $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar nativeKeys = require('../internals/object-keys');\nvar fails = require('../internals/fails');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });\n\n// `Object.keys` method\n// https://tc39.github.io/ecma262/#sec-object.keys\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  keys: function keys(it) {\n    return nativeKeys(toObject(it));\n  }\n});\n","export const RegExp = {\n  ACCOUNT: /^[a-z-A-Z]{4,10}$/, // 用户账号，4～10个的字母\n  PASSWORD: /^[a-zA-Z][a-zA-Z0-9]{3,9}$/, // 用户密码，4～10个的字母或数字组合\n  USERNAME: /[\\u4e00-\\u9fa5_a-zA-Z]{3,10}$/, // 用户名称，4～10个的字母或中文组合\n  MOBILE: /^[1]([3-9])[0-9]{9}$/ // 用户手机号\n};\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.isLoading),expression:\"isLoading\"}],staticClass:\"personal-page-wrapper\"},[(_vm.userInfos)?_c('el-form',{ref:\"form\",staticClass:\"permission-form\",attrs:{\"model\":_vm.userInfos,\"rules\":_vm.rules,\"label-width\":\"96px\",\"label-position\":\"left\"}},[_c('el-row',{staticClass:\"form-content-wrapper\",attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"size\":\"small\",\"label\":\"账号：\",\"prop\":\"account\"}},[_c('el-input',{attrs:{\"size\":\"small\"},model:{value:(_vm.userInfos.account),callback:function ($$v) {_vm.$set(_vm.userInfos, \"account\", $$v)},expression:\"userInfos.account\"}})],1),_c('el-form-item',{attrs:{\"size\":\"small\",\"label\":\"密码：\",\"prop\":\"password\"}},[_c('el-input',{attrs:{\"size\":\"small\"},model:{value:(_vm.userInfos.password),callback:function ($$v) {_vm.$set(_vm.userInfos, \"password\", $$v)},expression:\"userInfos.password\"}})],1),_c('el-form-item',{attrs:{\"size\":\"small\",\"label\":\"名称：\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"size\":\"small\"},model:{value:(_vm.userInfos.name),callback:function ($$v) {_vm.$set(_vm.userInfos, \"name\", $$v)},expression:\"userInfos.name\"}})],1),_c('el-form-item',{attrs:{\"size\":\"small\",\"label\":\"号码：\",\"prop\":\"mobile\"}},[_c('el-input',{attrs:{\"size\":\"small\",\"maxlength\":\"11\"},model:{value:(_vm.userInfos.mobile),callback:function ($$v) {_vm.$set(_vm.userInfos, \"mobile\", $$v)},expression:\"userInfos.mobile\"}})],1),_c('el-form-item',{attrs:{\"size\":\"small\",\"label\":\"创建时间：\"}},[_c('el-input',{attrs:{\"size\":\"small\",\"disabled\":\"\"},model:{value:(_vm.userInfos.createdTime),callback:function ($$v) {_vm.$set(_vm.userInfos, \"createdTime\", $$v)},expression:\"userInfos.createdTime\"}})],1),_c('el-form-item',{attrs:{\"size\":\"small\",\"label\":\"头像：\",\"prop\":\"avatar\"}},[_c('div',{staticClass:\"avatar-wrapper\"},[_c('UploadFiles',{attrs:{\"action\":\"/api/upload\",\"data\":{\n                directory: 'avatar'\n              },\"defaultPics\":_vm.defaultPics},on:{\"removeCallBack\":_vm.removeCallBack,\"successCallback\":_vm.successCallback}})],1)]),_c('el-form-item',{attrs:{\"size\":\"small\",\"label\":\"级别：\"}},[_c('el-select',{attrs:{\"disabled\":_vm.userInfos.role === 'SUPERADMIN',\"placeholder\":\"请选择\"},model:{value:(_vm.userInfos.role),callback:function ($$v) {_vm.$set(_vm.userInfos, \"role\", $$v)},expression:\"userInfos.role\"}},_vm._l((_vm.roleEnum),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_c('el-form-item',{attrs:{\"size\":\"small\",\"label\":\"描述：\",\"prop\":\"desc\"}},[_c('el-input',{attrs:{\"type\":\"textarea\",\"autosize\":{ minRows: 3, maxRows: 6 },\"show-word-limit\":\"\",\"maxlength\":\"100\",\"placeholder\":\"请输入内容\"},model:{value:(_vm.userInfos.desc),callback:function ($$v) {_vm.$set(_vm.userInfos, \"desc\", $$v)},expression:\"userInfos.desc\"}})],1)],1),_c('el-col',{attrs:{\"span\":12}},[_c('el-form-item',{attrs:{\"size\":\"small\",\"label\":\"权限菜单：\"}},[(_vm.menuList)?_c('el-tree',{ref:\"tree\",attrs:{\"disable\":\"\",\"data\":_vm.menuList,\"show-checkbox\":\"\",\"default-expand-all\":\"\",\"node-key\":\"permission\",\"highlight-current\":\"\",\"check-strictly\":\"\",\"props\":_vm.defaultProps},on:{\"check\":_vm.checkChange}}):_vm._e()],1)],1)],1),_c('div',{staticClass:\"button-wrapper mgt-20\"},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},nativeOn:{\"click\":function($event){return _vm.$throttleHandleSave('form')}}},[_vm._v(\"保 存\")])],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"personal-page-wrapper\" v-loading=\"isLoading\">\n    <el-form\n      v-if=\"userInfos\"\n      :model=\"userInfos\"\n      :rules=\"rules\"\n      ref=\"form\"\n      label-width=\"96px\"\n      class=\"permission-form\"\n      label-position=\"left\"\n    >\n      <el-row :gutter=\"20\" class=\"form-content-wrapper\">\n        <el-col :span=\"12\">\n          <el-form-item size=\"small\" label=\"账号：\" prop='account'>\n            <el-input size=\"small\" v-model=\"userInfos.account\" />\n          </el-form-item>\n          <el-form-item size=\"small\" label=\"密码：\" prop='password'>\n            <el-input size=\"small\" v-model=\"userInfos.password\" />\n          </el-form-item>\n          <el-form-item size=\"small\" label=\"名称：\" prop='name'>\n            <el-input size=\"small\" v-model=\"userInfos.name\" />\n          </el-form-item>\n          <el-form-item size=\"small\" label=\"号码：\" prop='mobile'>\n            <el-input size=\"small\" maxlength='11' v-model=\"userInfos.mobile\" />\n          </el-form-item>\n          <el-form-item size=\"small\" label=\"创建时间：\">\n            <el-input size=\"small\" disabled v-model=\"userInfos.createdTime\" />\n          </el-form-item>\n          <el-form-item size=\"small\" label=\"头像：\" prop='avatar'>\n            <div\n              class=\"avatar-wrapper\"\n            >\n              <UploadFiles\n                action=\"/api/upload\"\n                :data=\"{\n                  directory: 'avatar'\n                }\"\n                :defaultPics=\"defaultPics\"\n                @removeCallBack=\"removeCallBack\"\n                @successCallback=\"successCallback\"\n              />\n            </div>\n          </el-form-item>\n          <el-form-item size=\"small\" label=\"级别：\">\n            <el-select\n              :disabled=\"userInfos.role === 'SUPERADMIN'\"\n              v-model=\"userInfos.role\"\n              placeholder=\"请选择\"\n            >\n              <el-option\n                v-for=\"item in roleEnum\"\n                :key=\"item.value\"\n                :label=\"item.label\"\n                :value=\"item.value\"\n              />\n            </el-select>\n          </el-form-item>\n          <el-form-item size=\"small\" label=\"描述：\" prop=\"desc\">\n            <el-input\n              type=\"textarea\"\n              :autosize=\"{ minRows: 3, maxRows: 6 }\"\n              show-word-limit\n              maxlength='100'\n              placeholder=\"请输入内容\"\n              v-model=\"userInfos.desc\">\n            </el-input>\n          </el-form-item>\n        </el-col>\n        <el-col :span=\"12\">\n          <el-form-item size=\"small\" label=\"权限菜单：\">\n            <el-tree\n              disable\n              v-if=\"menuList\"\n              :data=\"menuList\"\n              show-checkbox\n              default-expand-all\n              node-key=\"permission\"\n              ref=\"tree\"\n              highlight-current\n              check-strictly\n              :props=\"defaultProps\"\n              @check=\"checkChange\"\n            />\n          </el-form-item>\n        </el-col>\n      </el-row>\n      <div class=\"button-wrapper mgt-20\">\n        <el-button\n          type=\"primary\"\n          size=\"small\"\n          @click.native=\"$throttleHandleSave('form')\"\n          >保 存</el-button\n        >\n      </div>\n    </el-form>\n  </div>\n</template>\n\n<script>\nimport { $formDate, $throttle } from '@/assets/js/utils';\nimport { roleEnum } from '@/assets/js/enum';\nimport { RegExp } from '@/assets/js/constant';\nimport { mapMutations } from 'vuex';\nexport default {\n  name: 'Personal',\n  components: {},\n  props: {},\n  data () {\n    return {\n      userInfos: null,\n      rules: {\n        account: [\n          { required: true, message: '请输入用户账号' },\n          { pattern: RegExp.ACCOUNT, message: '账号格式不正确，4～10个的字母' }\n        ],\n        password: [\n          { required: true, message: '请输入用户密码' },\n          {\n            pattern: RegExp.PASSWORD,\n            message: '密码格式不正确，4～10个的字母或数字组合'\n          }\n        ],\n        name: [\n          { required: true, message: '请输入用户名称' },\n          {\n            pattern: RegExp.USERNAME,\n            message: '名称格式不正确，4～10个的字母或中文组合'\n          }\n        ],\n        mobile: [\n          { required: true, message: '请输入用户号码' },\n          { pattern: RegExp.MOBILE, message: '号码格式不正确' }\n        ],\n        avatar: [{ required: true, message: '请上传头像' }],\n        desc: [\n          { required: true, message: '请输入用户相关的描述' }\n        ]\n      },\n      isLoading: false,\n      menuList: null,\n      hasPermission: null,\n      defaultProps: {\n        children: 'children',\n        label: 'title'\n      },\n      defaultPics: null\n    };\n  },\n  computed: {\n    roleEnum () {\n      if (this.userInfos.role === 'SUPERADMIN') {\n        return roleEnum;\n      } else {\n        return roleEnum.filter(i => i.value !== 'SUPERADMIN');\n      }\n    },\n    $throttleHandleSave () {\n      return $throttle((ref) => this.handleSave(ref), 2000);\n    }\n  },\n  methods: {\n    ...mapMutations(['SETMENULIST']),\n    async getUserInfo () {\n      return await this.$axios.get('/getUserInfos');\n    },\n    async getAllPermissionMenu () {\n      return await this.$axios.get('/getAllPermissionMenu');\n    },\n    async updateUserPersonalInfos (data) {\n      return await this.$axios.post('/updateUserPersonalInfos', data);\n    },\n    checkChange (data, options) {\n      const currentClickKey = data.permission;\n      const currentCheckKeys = options.checkedKeys;\n      const isCheck = currentCheckKeys.includes(currentClickKey);\n\n      const childKeyArray = [];\n      this.getAllChildKeys([data], childKeyArray);\n      const hasCheckKeys = this.$refs.tree.getCheckedKeys();\n\n      let hasCheckKeysAfterSet = null;\n      if (isCheck) {\n        const { parent } = this.$refs.tree.getNode(currentClickKey);\n        const parentKeysArray = [];\n        this.getAllParentKeys(parent, parentKeysArray);\n        hasCheckKeysAfterSet = [\n          ...new Set([...childKeyArray, ...hasCheckKeys, ...parentKeysArray])\n        ];\n      } else {\n        hasCheckKeysAfterSet = hasCheckKeys.filter(\n          i => !childKeyArray.includes(i)\n        );\n      }\n      this.$refs.tree.setCheckedKeys(hasCheckKeysAfterSet);\n    },\n    getAllChildKeys (parent, childKeyArray = []) {\n      parent.map(i => {\n        childKeyArray.push(i.permission);\n        if (i.children) {\n          this.getAllChildKeys(i.children, childKeyArray);\n        }\n      });\n    },\n    getAllParentKeys (parent, parentKeysArray = []) {\n      if (!Array.isArray(parent.data)) {\n        parentKeysArray.push(parent.data.permission);\n      }\n      if (parent.parent) {\n        this.getAllParentKeys(parent.parent, parentKeysArray);\n      }\n    },\n    disabledMenuList (list) {\n      for (let i = 0, len = list.length; i < len; i++) {\n        list[i].disabled = true;\n        if (list[i].children && list[i].children.length) {\n          this.disabledMenuList(list[i].children);\n        }\n      }\n    },\n    removeCallBack () {\n      this.userInfos.avatar = '';\n    },\n    successCallback (response) {\n      const { result } = response;\n      const { url } = result;\n      this.userInfos.avatar = url;\n    },\n    handleSave (ref) {\n      this.$refs[ref].validate((valid) => {\n          if (valid) {\n            const { account, password, name, mobile, avatar, desc } = this.userInfos;\n            const postData = {\n              account, password, name, mobile, avatar, desc\n            };\n            this.updateUserPersonalInfos(postData)\n              .then((res) => {\n                const { status, msg } = res.data;\n                if (status === 0) {\n                  this.$message.success(msg);\n                  this.SETMENULIST(null);\n                  this.$router.back();\n                }\n              });\n          } else {\n            console.log('error submit!!');\n            return false;\n          }\n        });\n    }\n  },\n  created () {\n    this.isLoading = true;\n    this.$axios.all([this.getUserInfo(), this.getAllPermissionMenu()]).then(\n      this.$axios.spread((user, menu) => {\n        const menuStatus = menu.data.status;\n        if (menuStatus === 0) {\n          this.disabledMenuList(menu.data.result);\n          this.menuList = menu.data.result;\n        }\n\n        const userStatus = user.data.status;\n        if (userStatus === 0) {\n          this.userInfos = user.data.result;\n          this.defaultPics = [\n            {\n              name: 'avatar',\n              url: user.data.result.avatar\n            }\n          ];\n          this.userInfos.createdTime = $formDate(\n            new Date(this.userInfos.createdTime),\n            'yyyy-MM-dd hh:mm:ss'\n          );\n          const { permission = '' } = this.userInfos;\n          this.hasPermission = permission.split(',');\n          this.$nextTick(() => {\n            this.$refs.tree.setCheckedKeys(permission.split(','));\n          });\n        }\n\n        this.isLoading = false;\n      })\n    );\n  },\n  mounted () {},\n  watch: {}\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.personal-page-wrapper {\n  height: 100%;\n  width: 100%;\n  padding: 20px;\n  box-sizing: border-box;\n  .permission-form {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n    .avatar-wrapper {\n      height: 144px;\n      width: 144px;\n      overflow: hidden;\n    }\n    .form-content-wrapper {\n      flex: 1;\n      height: 100%;\n      overflow-y: auto;\n    }\n    .button-wrapper {\n      text-align: center;\n      .el-button {\n        width: 200px;\n      }\n    }\n  }\n}\n</style>\n","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js??vue-loader-options!./Personal.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js??vue-loader-options!./Personal.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Personal.vue?vue&type=template&id=b92d8c1c&scoped=true&\"\nimport script from \"./Personal.vue?vue&type=script&lang=js&\"\nexport * from \"./Personal.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Personal.vue?vue&type=style&index=0&id=b92d8c1c&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.8.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"b92d8c1c\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@3.4.2@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.8.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js??vue-loader-options!./Personal.vue?vue&type=style&index=0&id=b92d8c1c&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/_mini-css-extract-plugin@0.8.2@mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/_css-loader@3.4.2@css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/_vue-loader@15.8.3@vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/_postcss-loader@3.0.0@postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/_sass-loader@8.0.2@sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.8.3@vue-loader/lib/index.js??vue-loader-options!./Personal.vue?vue&type=style&index=0&id=b92d8c1c&lang=scss&scoped=true&\"","var $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar ownKeys = require('../internals/own-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar createProperty = require('../internals/create-property');\n\n// `Object.getOwnPropertyDescriptors` method\n// https://tc39.github.io/ecma262/#sec-object.getownpropertydescriptors\n$({ target: 'Object', stat: true, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {\n    var O = toIndexedObject(object);\n    var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n    var keys = ownKeys(O);\n    var result = {};\n    var index = 0;\n    var key, descriptor;\n    while (keys.length > index) {\n      descriptor = getOwnPropertyDescriptor(O, key = keys[index++]);\n      if (descriptor !== undefined) createProperty(result, key, descriptor);\n    }\n    return result;\n  }\n});\n"],"sourceRoot":""}